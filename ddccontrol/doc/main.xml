<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN" "http://docbook.org/xml/4.3/docbookx.dtd" []>
 
<book>
 
<bookinfo>
<title>DDCcontrol Documentation</title>
<author>
<firstname>Nicolas</firstname>
<surname>Boichat</surname>
<affiliation>
        <address><email>nicolas@boichat.ch</email></address>
</affiliation>
</author>

<copyright><year>2005</year>
<holder>Nicolas Boichat</holder>
</copyright>

<releaseinfo role="meta">
$Id$
</releaseinfo> 

</bookinfo>

<chapter id="about">
<title>About DDCcontrol</title>

<sect1 id="ddccontrol">
<title>About DDCcontrol</title>
<para>DDCcontrol is a tool used to control monitor parameters, like brightness and contrast,
without using the OSD (On Screen Display) and the buttons in front of the monitor.</para>
<para>There is two version of this tool, a command line version, and a user-friendly
Gnome GUI.</para>
</sect1>
 
<sect1 id="ddcci">
<title>DDC/CI</title>
<para>DDC/CI is a protocol designed by VESA to configure monitor by software,
using two wires on the VGA or DVI cables, which forms an I2C bus.</para>
</sect1>

</chapter>

<chapter id="install">
<title>Install notes</title>

<sect1 id="requirement">
<title>Software Requirement</title>
<para>To compile and run DDCcontrol, you usually need to install these packages:</para>
<itemizedlist mark='bullet'>
<listitem>
<para>
<ulink url="http://www.xmlsoft.org/">libxml2</ulink>
</para>
</listitem>
<listitem>
<para>
<ulink url="http://atrey.karlin.mff.cuni.cz/~mj/pciutils.shtml">pci-utils</ulink>
</para>
</listitem>
<listitem>
<para>
<ulink url="http://www.gtk.org/">gtk+&gt;=2.4</ulink>
</para>
</listitem>
</itemizedlist>
<note>
<para>
You don't need pci-utils if you don't use direct PCI memory access, and you don't need gtk+ if you don't plan to use the Gnome GUI.
Usually, this is not the case, so you will need these packages.
</para>
</note>
</sect1>

<sect1 id="download">
<title>Download the sources</title>
<para>Go to the <ulink url="http://sourceforge.net/project/showfiles.php?group_id=117933">download section</ulink>
of ddccontrol project's page and download the latest
ddccontrol and ddccontrol-db source tarballs.</para>
<para>Then unpack these two archives, you should have two directories, ddccontrol and
ddccontrol-db.</para>
</sect1>
 
<sect1 id="compile">
<title>Compile and install</title>
<para>To compile and install the source tarballs, type:</para>
<screen format="linespecific">
# ./configure
# make
# make install
</screen>
<para>You need to do this in ddccontrol <emphasis>and</emphasis> ddccontrol-db directories.</para>
<para>If you set the --prefix parameter when configuring the first package, you must set it to the
same value when configuring the second.</para>
</sect1>

</chapter>

<chapter id="techdocs">
<title>Documents for developpers</title>
<sect1 id="xmlstruct">
<title>Monitor database structure</title>
<para>The monitor database is written in XML, it can be found in the db directory of ddccontrol-db package.</para>
<para>This directory contains the following files:
<itemizedlist mark='bullet'>
<listitem>
<para>
options.xml
</para>
</listitem>
<listitem>
<para>
monitor/%monitor_id%.xml
</para>
</listitem>
</itemizedlist>
</para>
<sect2 id="optionsxml">
<title>Control list</title>
<subtitle>XML file: options.xml</subtitle>
<para>Controls (e.g. "brightness"...) are contained in groups
(e.g. "color settings"). Groups and subgroups allow the GUI 
to separate the options in different branches on the tree.</para>

<para>Controls IDs are usually abbreviated Control Names.</para>

<para>Control types:</para>
<itemizedlist mark='bullet'>
<listitem>
<para>
"value": The control accepts values in a continuous range (e.g. brightness)
</para>
</listitem>
<listitem>
<para>
"command": An action occurs when the value is set to something greater than 0 (e.g. degauss).
</para>
<para>If you don't define any value entry in a command control, the default
value 0x01 will be used.</para>
</listitem>
<listitem>
<para>
"list": The control accepts a list of values (e.g. OSD language).
</para>
</listitem>
</itemizedlist>

<para>The "address" parameter in control and "value" in value are optional.</para>

<para>File format:</para>
<screen>
<![CDATA[<?xml version="1.0"?>
<monitor name="%full_monitor_name%" init="[standard|samsung]" caps="%caps%">
  <controls>
    <!--- value -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%"/>
    <!--- command using a default 0x01 value-->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%"/>
    <!--- command -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%">
      <value id="activate" value="%hex_value%"/>
    </control>
    <!--- list -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%">
      <value id="%value_id%" value="%hex_value%"/>
      <value...>
    </control>
    <control...>
  </controls>
</monitor>
]]></screen>
</sect2>
<sect2 id="monitorxml">
<title>Monitor Profiles</title>
<subtitle>XML files: monitor/%monitor_id%.xml</subtitle>
<para>List of controls supported by a monitor.</para>
<para>Controls IDs are defined in options.xml, if it is a list or a command
with a non-default value, supported values must be defined. "address" 
parameter for controls, and "value", are optional if they are defined 
in the general options file.</para>

<para>The init parameter in monitor define the type of the initialisation:
DDC/CI standard ("standard"), or Samsung ("samsung"). </para>

<para>The caps parameter is optional. It is compatible with ACCESS.bus
specifications and is treated as following: </para>
<itemizedlist mark='bullet'>
<listitem>
<para>
If caps is not defined, caps are read from monitor.
</para>
</listitem>
<listitem>
<para>
If this attribute exists and have a vcp string
(e.g. caps="type(lcd) vcp(10 12)") then specified caps string are used.
</para>
</listitem>
<listitem>
<para> 
If specified caps string does not contain vcp (e.g. caps="type(crt)"
or caps=""), then all controls defined in the monitor profile are 
supposed to be supported.
</para>
</listitem>
</itemizedlist>

<para>
You can set a parameter delay to set the time in milliseconds to wait
after changing the value of this control. If you don't, a default value
is used.</para>

<para>File format:</para>
<screen>
<![CDATA[<?xml version="1.0"?>
<monitor name="%full_monitor_name%" init="[standard|samsung]" caps="%caps%">
  <controls>
    <!--- value -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%"/>
    <!--- command using a default 0x01 value-->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%"/>
    <!--- command -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%">
      <value id="activate" value="%hex_value%"/>
    </control>
    <!--- list -->
    <control id="%control_id%" address="%hex_address%" delay="%wait_time%">
      <value id="%value_id%" value="%hex_value%"/>
      <value...>
    </control>
    <control...>
  </controls>
</monitor>
]]></screen>
<para>If a monitor supports exactly the same controls as another one, you can define it as shown:</para>
<screen>
<![CDATA[<?xml version="1.0"?>
<monitor include="%monitor_id%" name="%full_monitor_name%" caps="%caps%"/>
]]></screen>
</sect2>
</sect1>
</chapter>
</book>
